(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c17065a"],{"2cf7":function(e,t,a){},"3f23":function(e,t,a){"use strict";var o=a("2cf7"),s=a.n(o);s.a},b18f:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.customerList,width:"100%"}},[a("el-table-column",{attrs:{prop:"booOrderNum",label:"Order number"}}),a("el-table-column",{attrs:{prop:"boobAddress",label:"Departure"}}),a("el-table-column",{attrs:{prop:"booAAddress",label:"Destination"}}),a("el-table-column",{attrs:{prop:"boobTime",label:"Departure time"}}),a("el-table-column",{attrs:{prop:"reserve2",label:"Total amount"}}),a("el-table-column",{attrs:{prop:"create_time",label:"Creation time"}}),a("el-table-column",{attrs:{prop:"flagPay",label:"Order status"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.flagPay?a("el-tag",{attrs:{type:"danger"}},[e._v("Unpaied")]):e._e(),1==t.row.flagPay?a("el-tag",{attrs:{type:"success"}},[e._v("Paied")]):e._e(),2==t.row.flagPay?a("el-tag",{attrs:{type:"info"}},[e._v("Canceled")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"View the order"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editcustomer(t.$index,t.row)}}},[e._v("View")])]}}])}),a("el-table-column",{attrs:{label:"Customer operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.flagPay?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletecustomer(t.$index,t.row)}}},[e._v("delete")]):e._e(),0==t.row.flagPay?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.pay(t.$index,t.row)}}},[e._v("pay")]):e._e(),1==t.row.flagPay?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.returnticket(t.$index,t.row)}}},[e._v("Refund")]):e._e()]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"",layout:"prev, pager, next","current-page":e.pageInfo.pageNum,"page-count":e.pageInfo.pages,"page-size":e.pageInfo.pageSize,total:e.pageInfo.total},on:{"update:currentPage":function(t){return e.$set(e.pageInfo,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"pageNum",t)},"current-change":this.findList}}),a("el-dialog",{attrs:{visible:e.editDialogVisible,title:"Order details"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"customerForm",staticStyle:{width:"500px"},attrs:{model:e.customer,"label-width":"100px",size:"small "}},[a("el-form-item",{attrs:{label:"Order Id",prop:"booOrderNum"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.customer.booOrderNum,callback:function(t){e.$set(e.customer,"booOrderNum",t)},expression:"customer.booOrderNum"}})],1),a("el-form-item",{attrs:{label:"Ticket Id",prop:"booNo"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.customer.booNo,callback:function(t){e.$set(e.customer,"booNo",t)},expression:"customer.booNo"}})],1),a("el-form-item",{attrs:{label:"Scheduled Time",prop:"boobTime"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.customer.boobTime,callback:function(t){e.$set(e.customer,"boobTime",t)},expression:"customer.boobTime"}})],1),a("el-form-item",{attrs:{label:"Order State",prop:"bookFlag"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.customer.bookFlag,callback:function(t){e.$set(e.customer,"bookFlag",t)},expression:"customer.bookFlag"}})],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("Booking Person")]),e._l(e.customer.persions,(function(t){return a("div",{key:t.cusAccount},[a("el-form-item",{attrs:{label:"Name"}},[a("el-input",{staticStyle:{float:"left",width:"400px"},attrs:{disabled:""},model:{value:t.cusAccount,callback:function(a){e.$set(t,"cusAccount",a)},expression:"pr.cusAccount"}})],1),a("el-form-item",{attrs:{label:"Phone"}},[a("el-input",{staticStyle:{float:"left",width:"400px"},attrs:{disabled:""},model:{value:t.cusTelNumber,callback:function(a){e.$set(t,"cusTelNumber",a)},expression:"pr.cusTelNumber"}})],1),a("el-form-item",{attrs:{label:"Id number"}},[a("el-input",{staticStyle:{float:"left",width:"400px"},attrs:{disabled:""},model:{value:t.cusId,callback:function(a){e.$set(t,"cusId",a)},expression:"pr.cusId"}})],1),a("el-form-item",{attrs:{label:"Aircraft space"}},[a("el-input",{staticStyle:{float:"left",width:"80px"},attrs:{disabled:""},model:{value:t.booBerth,callback:function(a){e.$set(t,"booBerth",a)},expression:"pr.booBerth"}})],1),a("el-form-item",{attrs:{label:"Price"}},[a("el-input",{staticStyle:{float:"left",width:"80px"},attrs:{disabled:""},model:{value:t.fliYfare,callback:function(a){e.$set(t,"fliYfare",a)},expression:"pr.fliYfare"}})],1),a("hr")],1)})),a("el-form-item",[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("close")])],1)],2)],1),a("el-dialog",{attrs:{title:"Pay now",visible:e.dialogVisible1,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible1=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Amount paid"}},[a("el-input",{attrs:{disabled:""},model:{value:e.paynum,callback:function(t){e.paynum=t},expression:"paynum"}})],1),a("el-form-item",{attrs:{label:"Payment password"}},[a("el-input",{model:{value:e.payPwd,callback:function(t){e.payPwd=t},expression:"payPwd"}})],1),a("el-form-item",{attrs:{label:"支付方式"}},[a("el-select",{attrs:{placeholder:"Method of payment"},model:{value:e.payType,callback:function(t){e.payType=t},expression:"payType"}},e._l(e.payoptions,(function(e){return a("el-option",{key:e.username,attrs:{label:e.name,value:e.username}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onpay}},[e._v("Confirm")])],1)],1)],1)},s=[],r={name:"vip",data:function(){return{customer:{},payPwd:"",payType:"",form:{},paynum:0,rowForm:{},dialogVisible1:!1,payoptions:[],pageInfo:{pageNum:1,pageSize:10,pages:10,total:100},customerList:[],editDialogVisible:!1}},created:function(){this.findList()},methods:{returnticket:function(e,t){var a=this;this.$confirm("This operation is a refund operation. Do you want to continue?","提示",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){var e=JSON.parse(window.localStorage.getItem("user"));axios.post("/api/payerLink/exitMoney",{name:e.username,payNum:parseInt(t.reserve2),reserve2:t.reserve3}).then((function(e){e.data.success?(a.$message({type:"success",message:"Successful refund"}),a.rowForm=t,a.rowForm.flagPay=2,a.saveOrder()):a.$message({type:"erro",message:"Refund failed"})}))})).catch((function(){a.$message({type:"info",message:"Undeleted"})}))},handleClose:function(){this.dialogVisible1=!1},onpay:function(){var e=this,t=JSON.parse(window.localStorage.getItem("user"));""!=this.payPwd?this.payPwd==t.payPwd?axios.post("/api/payerLink/pay",{name:t.username,payNum:parseInt(this.paynum),reserve2:this.payType}).then((function(t){t.data.success?(e.$message({type:"success",message:"Payment successful!"}),e.rowForm.flagPay=1,e.rowForm.reserve3=e.payType,e.saveOrder(),e.dialogVisible1=!1):e.$message({type:"erro",message:t.data.message})})):this.$message({type:"error",message:"Payment password error"}):this.$message({type:"error",message:"Please enter the payment password"})},saveOrder:function(){var e=this,t=JSON.parse(window.localStorage.getItem("user"));null==t&&this.$message({showClose:!0,message:"Please log in first",type:"error"}),this.rowForm.reserve1=t.username,axios.post("/api/book/update",this.rowForm).then((function(t){t.data.success?e.$message({title:"提示",message:"Submitted",type:"success"}):e.$message({type:"error",message:"Submit failed"}),e.clear(),e.paymentDialogVisible=!1}))},pay:function(e,t){var a=this;this.paynum=t.reserve2,this.rowForm=t,axios.get("/api/payerLink/list",{}).then((function(e){a.payoptions=e.data.data,a.dialogVisible1=!0}))},deletecustomer:function(e,t){var a=this;this.$confirm("This operation will permanently delete the administrator. Do you want to continue?","提示",{confirmButtonText:"Yes",cancelButtonText:"cancel",type:"warning"}).then((function(){axios.delete("/api/book/delete?id="+t.id).then((function(e){e.data.success?a.$message({type:"success",message:"Deleted"}):a.$message({type:"error",message:"Delete failed"}),a.findList()}))})).catch((function(){a.$message({type:"info",message:"undeleted"})}))},findList:function(){var e=this,t=JSON.parse(window.localStorage.getItem("user"));axios.post("/api/book/page",{pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize,search:t.username,air:""}).then((function(t){e.pageInfo.pageSize=e.pageInfo.pageSize,e.pageInfo.pageNum=e.pageInfo.pageNum,e.pageInfo.total=t.data.total,e.pageInfo.pages=t.data.total,e.customerList=t.data.data}))},editcustomer:function(e,t){var a=this;axios.get("/api/book/info?id="+t.id).then((function(e){a.customer=e.data.data})),this.editDialogVisible=!0}}},i=r,l=(a("3f23"),a("2877")),n=Object(l["a"])(i,o,s,!1,null,"61c9191a",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-4c17065a.b33a772d.js.map